import{a as q,b as H}from"./chunk-VDOOGDYS.js";import{A as j,B as C,F as x,I as r,J as E,K as S,L as R,M as V,P as z,R as A,S as B,T as U,U as Y,X as _,b as f,ba as $,da as D,e as L,ea as y,f as F,fa as G,ga as J,i as u,k as s,l,m as g,n as h,o as p,p as c,q as a,r as o,s as v,t as M,u as N,v as W,w as k,x as O,y as P}from"./chunk-UIMUALTF.js";var b=class t{constructor(i){this.state=i}onSearch(i,e){e.preventDefault(),this.state.searchTerm.set(i)}static \u0275fac=function(e){return new(e||t)(l(y))};static \u0275cmp=g({type:t,selectors:[["app-filters-component"]],decls:6,vars:0,consts:[["searchInput",""],[1,"d-flex","justify-content-center","mb-4"],[1,"d-flex","w-100",2,"max-width","500px",3,"submit"],["type","search","placeholder"," Search city...",1,"form-control","form-control-lg","me-2","rounded-pill","shadow-sm"],["type","submit",1,"btn","btn-primary","btn-lg","rounded-pill","px-4","shadow-sm"]],template:function(e,n){if(e&1){let m=P();M(0,"div",1)(1,"form",2),j("submit",function(I){L(m);let X=x(3);return F(n.onSearch(X.value,I))}),W(2,"input",3,0),M(4,"button",4),r(5," Search "),N()()()}},encapsulation:2})};var te=(t,i)=>({"card-bg-light":t,"card-dark-mode":i}),ie=t=>["/city",t];function ne(t,i){if(t&1&&(k(0),a(1,"p",14),r(2," \u{1F4C5} "),a(3,"strong"),r(4),o(),v(5,"br"),r(6," \u{1F321}\uFE0F "),a(7,"strong"),r(8),o(),v(9,"br"),r(10," \u{1F4A7} "),a(11,"strong"),r(12),o()(),O()),t&2){let e=i.ngIf,n=C(2);s(4),E(e.date),s(4),S("",n.displayTemperature(e),"\xB0"),s(4),S("",e.humidity,"%")}}function re(t,i){t&1&&(a(0,"div",15),r(1," No weather data available. "),o())}function oe(t,i){if(t&1&&(a(0,"div",16),r(1),o()),t&2){let e=i.ngIf,n=C(2);s(),S(" ",n.getIcon(e.temperatureCelsius,e.humidity)," ")}}function ae(t,i){if(t&1&&(a(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h4",9),r(5),o(),p(6,ne,13,3,"ng-container",10)(7,re,2,0,"ng-template",null,0,z),o(),p(9,oe,2,1,"div",11),o(),a(10,"div",12)(11,"a",13),r(12," View Details "),o()()()()),t&2){let e=i.$implicit,n=x(8),m=C();c("ngClass",V(6,te,m.themeMode()==="light",m.themeMode()==="dark")),s(5),E(e.city),s(),c("ngIf",m.latestWeather(e))("ngIfElse",n),s(3),c("ngIf",m.latestWeather(e)),s(2),c("routerLink",R(9,ie,e.id))}}function se(t,i){t&1&&(a(0,"div",17)(1,"div",18)(2,"span",19),r(3,"Loading..."),o()()())}function me(t,i){t&1&&(a(0,"div",17)(1,"p"),r(2,"Failed to load cities. Try refreshing the page."),o()())}function ce(t,i){t&1&&(a(0,"div",17)(1,"p"),r(2,"No cities match your search."),o()())}var d=class t{constructor(i,e,n,m,Q){this.weatherService=i;this.state=e;this.temperatureService=n;this.weatherIconService=m;this.themeService=Q;this.themeMode=this.themeService.themeMode,this.weatherService.getAllCities().subscribe({next:I=>{this.cities.set(I),this.loading.set(!1)},error:()=>this.loading.set(!1)})}cities=u([]);loading=u(!0);themeMode=u("light");filteredCities=A(()=>{let i=this.state.searchTerm().toLowerCase();return this.cities().filter(e=>e.city.toLowerCase().includes(i))});latestWeather(i){let e=i.forecast,n=this.state.selectedDate();return n?e.find(m=>m.date===n)||null:e[0]}displayTemperature(i){return this.temperatureService.convert(i.temperatureCelsius,this.state.temperatureUnit())}getIcon(i,e){return this.weatherIconService.getIcon(i,e)}static \u0275fac=function(e){return new(e||t)(l(q),l(y),l(G),l(H),l(J))};static \u0275cmp=g({type:t,selectors:[["app-cities-list-component"]],decls:7,vars:4,consts:[["noData",""],[1,"container","mt-4"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",3,"ngClass",4,"ngFor","ngForOf"],["class","text-center my-4",4,"ngIf"],[1,"col",3,"ngClass"],[1,"card","weather-card","shadow-lg","h-100","d-flex","flex-column"],[1,"d-flex","align-items-center","px-3","pt-3"],[1,"weather-details","flex-grow-1"],[1,"card-title","fw-bold"],[4,"ngIf","ngIfElse"],["class","weather-icon",4,"ngIf"],[1,"mt-auto","px-3","pb-3"],[1,"btn","btn-sky","w-100",3,"routerLink"],[1,"mb-0"],[1,"py-1","my-0"],[1,"weather-icon"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(e,n){e&1&&(a(0,"div",1),v(1,"app-filters-component"),a(2,"div",2),p(3,ae,13,11,"div",3),o(),p(4,se,4,0,"div",4)(5,me,3,0,"div",4)(6,ce,3,0,"div",4),o()),e&2&&(s(3),c("ngForOf",n.filteredCities()),s(),c("ngIf",n.loading()),s(),c("ngIf",!n.loading()&&n.cities().length===0),s(),c("ngIf",!n.loading()&&n.filteredCities().length===0&&n.cities().length>0))},dependencies:[$,_,B,U,Y,b],styles:[".weather-card[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#cce9ff,#f2f9ff);border:none;border-radius:20px;padding-top:10px;transition:transform .3s ease,box-shadow .3s ease}.weather-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.weather-icon[_ngcontent-%COMP%]{font-size:3.2rem;text-align:center;flex-shrink:0}.weather-details[_ngcontent-%COMP%]{font-size:1.1rem}.btn-sky[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:8px;transition:.25s;margin-top:.5rem}.btn-sky[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.card-dark-mode[_ngcontent-%COMP%]   .weather-card[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#1a1a2e,#16213e)}.card-dark-mode[_ngcontent-%COMP%]   .weather-icon[_ngcontent-%COMP%]{text-shadow:0 0 10px rgba(255,255,255,.4)}"]})};var le=[{path:"",component:d}],w=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=h({type:t});static \u0275inj=f({imports:[D.forChild(le),D]})};var K=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=h({type:t});static \u0275inj=f({imports:[_,w,d]})};export{K as CitiesListModule};
