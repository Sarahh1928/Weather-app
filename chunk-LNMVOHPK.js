import{a as q,b as H}from"./chunk-6E72ZEPD.js";import{A as x,E as S,H as r,I as F,J as y,K as R,L as V,O as z,Q as A,R as B,S as U,T as Y,W as b,aa as $,b as u,ca as N,da as w,e as T,ea as G,f as E,fa as J,i as g,k as s,l,m as h,n as v,o as f,p as c,q as a,r as o,s as C,t as _,u as D,v as k,w as P,x as j,z as L}from"./chunk-ISMSZL5I.js";var I=class e{constructor(i){this.state=i}typingTimer;onType(i){clearTimeout(this.typingTimer),this.typingTimer=setTimeout(()=>{this.state.searchTerm.set(i)},400)}onSubmit(i){i.preventDefault()}static \u0275fac=function(t){return new(t||e)(l(w))};static \u0275cmp=h({type:e,selectors:[["app-filters-component"]],decls:6,vars:0,consts:[["searchInput",""],[1,"d-flex","justify-content-center","mb-4"],[1,"d-flex","w-100",2,"max-width","500px",3,"submit"],["type","search","placeholder"," Search city...",1,"form-control","form-control-lg","me-2","rounded-pill","shadow-sm","search-input","border-0",3,"input"],["type","submit",1,"btn","btn-primary","btn-lg","rounded-pill","px-4","shadow-sm","border-0"]],template:function(t,n){if(t&1){let m=j();_(0,"div",1)(1,"form",2),L("submit",function(d){return T(m),E(n.onSubmit(d))}),_(2,"input",3,0),L("input",function(){T(m);let d=S(3);return E(n.onType(d.value))}),D(),_(4,"button",4),r(5," Search "),D()()()}},styles:[".search-input[_ngcontent-%COMP%]{color:#000!important}"]})};var Z=(e,i)=>({"card-bg-light":e,"card-dark-mode":i}),ee=e=>["/city",e];function te(e,i){if(e&1&&(k(0),a(1,"p",14),r(2," \u{1F4C5} "),a(3,"strong"),r(4),o(),C(5,"br"),r(6," \u{1F321}\uFE0F "),a(7,"strong"),r(8),o(),C(9,"br"),r(10," \u{1F4A7} "),a(11,"strong"),r(12),o()(),P()),e&2){let t=i.ngIf,n=x(2);s(4),F(t.date),s(4),y("",n.displayTemperature(t),"\xB0"),s(4),y("",t.humidity,"%")}}function ie(e,i){e&1&&(a(0,"div",15),r(1," No weather data available. "),o())}function ne(e,i){if(e&1&&(a(0,"div",16),r(1),o()),e&2){let t=i.ngIf,n=x(2);s(),y(" ",n.getIcon(t.temperatureCelsius,t.humidity)," ")}}function re(e,i){if(e&1&&(a(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h4",9),r(5),o(),f(6,te,13,3,"ng-container",10)(7,ie,2,0,"ng-template",null,0,z),o(),f(9,ne,2,1,"div",11),o(),a(10,"div",12)(11,"a",13),r(12," View Details "),o()()()()),e&2){let t=i.$implicit,n=S(8),m=x();c("ngClass",V(6,Z,m.themeMode()==="light",m.themeMode()==="dark")),s(5),F(t.city),s(),c("ngIf",m.latestWeather(t))("ngIfElse",n),s(3),c("ngIf",m.latestWeather(t)),s(2),c("routerLink",R(9,ee,t.id))}}function oe(e,i){e&1&&(a(0,"div",17)(1,"div",18)(2,"span",19),r(3,"Loading..."),o()()())}function ae(e,i){e&1&&(a(0,"div",17)(1,"p"),r(2,"Failed to load cities. Try refreshing the page."),o()())}function se(e,i){e&1&&(a(0,"div",17)(1,"p"),r(2,"No cities match your search."),o()())}var p=class e{constructor(i,t,n,m,O){this.weatherService=i;this.state=t;this.temperatureService=n;this.weatherIconService=m;this.themeService=O;this.themeMode=this.themeService.themeMode,this.weatherService.getAllCities().subscribe({next:d=>{this.cities.set(d),this.loading.set(!1)},error:()=>this.loading.set(!1)})}cities=g([]);loading=g(!0);themeMode=g("light");filteredCities=A(()=>{let i=this.state.searchTerm().toLowerCase();return this.cities().filter(t=>t.city.toLowerCase().includes(i))});latestWeather(i){let t=i.forecast,n=this.state.selectedDate();return n?t.find(m=>m.date===n)||null:t[0]}displayTemperature(i){return this.temperatureService.convert(i.temperatureCelsius,this.state.temperatureUnit())}getIcon(i,t){return this.weatherIconService.getIcon(i,t)}static \u0275fac=function(t){return new(t||e)(l(q),l(w),l(G),l(H),l(J))};static \u0275cmp=h({type:e,selectors:[["app-cities-list-component"]],decls:7,vars:4,consts:[["noData",""],[1,"container","mt-4"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",3,"ngClass",4,"ngFor","ngForOf"],["class","text-center my-4",4,"ngIf"],[1,"col",3,"ngClass"],[1,"card","weather-card","shadow-lg","h-100","d-flex","flex-column"],[1,"d-flex","align-items-center","px-3","pt-3"],[1,"weather-details","flex-grow-1"],[1,"card-title","fw-bold"],[4,"ngIf","ngIfElse"],["class","weather-icon",4,"ngIf"],[1,"mt-auto","px-3","pb-3"],[1,"btn","btn-sky","w-100",3,"routerLink"],[1,"mb-0"],[1,"py-1","my-0"],[1,"weather-icon"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(t,n){t&1&&(a(0,"div",1),C(1,"app-filters-component"),a(2,"div",2),f(3,re,13,11,"div",3),o(),f(4,oe,4,0,"div",4)(5,ae,3,0,"div",4)(6,se,3,0,"div",4),o()),t&2&&(s(3),c("ngForOf",n.filteredCities()),s(),c("ngIf",n.loading()),s(),c("ngIf",!n.loading()&&n.cities().length===0),s(),c("ngIf",!n.loading()&&n.filteredCities().length===0&&n.cities().length>0))},dependencies:[$,b,B,U,Y,I],styles:[".weather-card[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#cce9ff,#f2f9ff);border:none;border-radius:20px;padding-top:10px;transition:transform .3s ease,box-shadow .3s ease}.weather-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.weather-icon[_ngcontent-%COMP%]{font-size:3.2rem;text-align:center;flex-shrink:0}.weather-details[_ngcontent-%COMP%]{font-size:1.1rem}.btn-sky[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:8px;transition:.25s;margin-top:.5rem}.btn-sky[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.card-dark-mode[_ngcontent-%COMP%]   .weather-card[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#1a1a2e,#16213e)}.card-dark-mode[_ngcontent-%COMP%]   .weather-icon[_ngcontent-%COMP%]{text-shadow:0 0 10px rgba(255,255,255,.4)}"]})};var me=[{path:"",component:p}],M=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=v({type:e});static \u0275inj=u({imports:[N.forChild(me),N]})};var K=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=v({type:e});static \u0275inj=u({imports:[b,M,p]})};export{K as CitiesListModule};
